"use strict";
/*
  Copyright 2018 Google LLC

  Use of this source code is governed by an MIT-style
  license that can be found in the LICENSE file or at
  https://opensource.org/licenses/MIT.
*/
Object.defineProperty(exports, "__esModule", { value: true });
exports.runWizard = void 0;
const fse = require("fs-extra");
const common_tags_1 = require("common-tags");
const stringifyObject = require("stringify-object");
const ask_questions_1 = require("./questions/ask-questions");
const logger_1 = require("./logger");
async function runWizard(options = {}) {
    const { configLocation, config } = await ask_questions_1.askQuestions(options);
    // See https://github.com/GoogleChrome/workbox/issues/2796
    const contents = `module.exports = ${stringifyObject(config)};`;
    await fse.writeFile(configLocation, contents);
    const command = ("injectManifest" in options) ? 'injectManifest' : 'generateSW';
    logger_1.logger.log(`To build your service worker, run

  workbox ${command} ${configLocation}

as part of a build process. See https://goo.gl/fdTQBf for details.`);
    const configDocsURL = ("injectManifest" in options) ?
        'https://goo.gl/8bs14N' :
        'https://goo.gl/gVo87N';
    logger_1.logger.log(common_tags_1.oneLine `You can further customize your service worker by making changes
    to ${configLocation}. See ${configDocsURL} for details.`);
}
exports.runWizard = runWizard;
